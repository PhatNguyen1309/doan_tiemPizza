{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\This PC\\\\OneDrive\\\\Desktop\\\\doan\\\\doan\\\\doan_tiemPizza\\\\frontend\\\\src\\\\components\\\\admin\\\\NewProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, Fragment } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addProduct, clearErrors } from '../../actions/productActions';\nimport { CREATE_PRODUCT_RESET } from '../../constants/productConstants';\nimport { useAlert } from 'react-alert';\nimport { useHistory } from 'react-router-dom';\nimport Sidebar from './Sidebar';\nimport axios from 'axios';\n\nconst NewProduct = () => {\n  _s();\n\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState('');\n  const [supplier, setSupplier] = useState('');\n  const [suppliers, setSuppliers] = useState([]); // Danh sách nhà cung cấp\n\n  const dispatch = useDispatch();\n  const alert = useAlert();\n  const history = useHistory();\n  const {\n    error,\n    success\n  } = useSelector(state => state.products);\n  useEffect(() => {\n    // Lấy danh sách nhà cung cấp từ API\n    const fetchSuppliers = async () => {\n      try {\n        const response = await axios.get('/api/v1/suppliers'); // API lấy thông tin nhà cung cấp\n\n        setSuppliers(response.data.suppliers);\n      } catch (err) {\n        alert.error('Không thể lấy danh sách nhà cung cấp');\n      }\n    };\n\n    fetchSuppliers();\n\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (success) {\n      alert.success('Sản phẩm đã được thêm mới');\n      history.push('/admin/products');\n      dispatch({\n        type: CREATE_PRODUCT_RESET\n      });\n    }\n  }, [dispatch, alert, error, success, history]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const productData = {\n      name,\n      price,\n      supplier // Gửi thông tin nhà cung cấp khi thêm sản phẩm\n\n    };\n    console.log(productData); // Kiểm tra dữ liệu\n\n    dispatch(addProduct(productData)); // Gửi dữ liệu tới action\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-2\",\n        children: /*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-10\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"my-5\",\n            children: \"Th\\xEAm m\\u1EDBi s\\u1EA3n ph\\u1EA9m\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"name\",\n                children: \"T\\xEAn s\\u1EA3n ph\\u1EA9m\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"name\",\n                className: \"form-control\",\n                value: name,\n                onChange: e => setName(e.target.value),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"price\",\n                children: \"Gi\\xE1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                id: \"price\",\n                className: \"form-control\",\n                value: price,\n                onChange: e => setPrice(e.target.value),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"supplier\",\n                children: \"Nh\\xE0 cung c\\u1EA5p\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"supplier\",\n                className: \"form-control\",\n                value: supplier,\n                onChange: e => setSupplier(e.target.value),\n                required: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Ch\\u1ECDn nh\\xE0 cung c\\u1EA5p\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 37\n                }, this), suppliers.map(sup => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: sup._id,\n                  children: sup.name\n                }, sup._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 41\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary mt-3\",\n              children: \"L\\u01B0u s\\u1EA3n ph\\u1EA9m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n\n_s(NewProduct, \"9yfYa3BHbARO2dSVLTMacfwsv8g=\", false, function () {\n  return [useDispatch, useAlert, useHistory, useSelector];\n});\n\n_c = NewProduct;\nexport default NewProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewProduct\");","map":{"version":3,"sources":["C:/Users/This PC/OneDrive/Desktop/doan/doan/doan_tiemPizza/frontend/src/components/admin/NewProduct.js"],"names":["React","useState","useEffect","Fragment","useDispatch","useSelector","addProduct","clearErrors","CREATE_PRODUCT_RESET","useAlert","useHistory","Sidebar","axios","NewProduct","name","setName","price","setPrice","supplier","setSupplier","suppliers","setSuppliers","dispatch","alert","history","error","success","state","products","fetchSuppliers","response","get","data","err","push","type","handleSubmit","e","preventDefault","productData","console","log","target","value","map","sup","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addProduct, clearErrors } from '../../actions/productActions';\nimport { CREATE_PRODUCT_RESET } from '../../constants/productConstants';\nimport { useAlert } from 'react-alert';\nimport { useHistory } from 'react-router-dom';\nimport Sidebar from './Sidebar';\nimport axios from 'axios';\n\nconst NewProduct = () => {\n    const [name, setName] = useState('');\n    const [price, setPrice] = useState('');\n    const [supplier, setSupplier] = useState('');\n    const [suppliers, setSuppliers] = useState([]); // Danh sách nhà cung cấp\n\n    const dispatch = useDispatch();\n    const alert = useAlert();\n    const history = useHistory();\n\n    const { error, success } = useSelector(state => state.products);\n\n    useEffect(() => {\n        // Lấy danh sách nhà cung cấp từ API\n        const fetchSuppliers = async () => {\n            try {\n                const response = await axios.get('/api/v1/suppliers'); // API lấy thông tin nhà cung cấp\n                setSuppliers(response.data.suppliers);\n            } catch (err) {\n                alert.error('Không thể lấy danh sách nhà cung cấp');\n            }\n        };\n\n        fetchSuppliers();\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors());\n        }\n\n        if (success) {\n            alert.success('Sản phẩm đã được thêm mới');\n            history.push('/admin/products');\n            dispatch({ type: CREATE_PRODUCT_RESET });\n        }\n    }, [dispatch, alert, error, success, history]);\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        const productData = {\n            name,\n            price,\n            supplier // Gửi thông tin nhà cung cấp khi thêm sản phẩm\n        };\n\n        console.log(productData); // Kiểm tra dữ liệu\n        dispatch(addProduct(productData)); // Gửi dữ liệu tới action\n    };\n\n    return (\n        <Fragment>\n            <div className=\"row\">\n                <div className=\"col-12 col-md-2\">\n                    <Sidebar />\n                </div>\n\n                <div className=\"col-12 col-md-10\">\n                    <div className=\"container\">\n                        <h1 className=\"my-5\">Thêm mới sản phẩm</h1>\n\n                        <form onSubmit={handleSubmit}>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"name\">Tên sản phẩm</label>\n                                <input \n                                    type=\"text\" \n                                    id=\"name\" \n                                    className=\"form-control\" \n                                    value={name}\n                                    onChange={(e) => setName(e.target.value)} \n                                    required \n                                />\n                            </div>\n\n                            <div className=\"form-group\">\n                                <label htmlFor=\"price\">Giá</label>\n                                <input \n                                    type=\"number\" \n                                    id=\"price\" \n                                    className=\"form-control\" \n                                    value={price}\n                                    onChange={(e) => setPrice(e.target.value)} \n                                    required \n                                />\n                            </div>\n\n                            <div className=\"form-group\">\n                                <label htmlFor=\"supplier\">Nhà cung cấp</label>\n                                <select\n                                    id=\"supplier\"\n                                    className=\"form-control\"\n                                    value={supplier}\n                                    onChange={(e) => setSupplier(e.target.value)}\n                                    required\n                                >\n                                    <option value=\"\">Chọn nhà cung cấp</option>\n                                    {suppliers.map(sup => (\n                                        <option key={sup._id} value={sup._id}>\n                                            {sup.name}\n                                        </option>\n                                    ))}\n                                </select>\n                            </div>\n\n                            <button type=\"submit\" className=\"btn btn-primary mt-3\">Lưu sản phẩm</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </Fragment>\n    );\n};\n\nexport default NewProduct;\n"]},"metadata":{},"sourceType":"module"}